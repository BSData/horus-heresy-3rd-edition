name: comment-on-merge.yml
on: pull_request
jobs:
  list_commits:
    runs-on: ubuntu-latest
    steps:
      - name: Checking out game system
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Setting up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install GitPython
        run: pip install GitPython
      - name: Checking out BSCopy
        uses: actions/checkout@v4
        with:
          repository: 'nstephenh/bscopy'
          path: 'tests/BSCopy'
      - name: Summarize changes
        run: |
          ls
          pwd
          MERGE_BASE=$(git merge-base ${{ github.event.pull_request.base.sha }} ${{ github.event.pull_request.head.sha }})
          echo $MERGE_BASE
          python3 reporting_scripts/diff_test.py $MERGE_BASE
        working-directory: 'tests/BSCopy'
        env:
          DEFAULT_DATA_DIRECTORY: ${{ github.workspace }}/..
